@using dsstats.shared;

@if (Replay != null)
{
    // 1. Determine the relevant team's data based on the TeamNumber
    var commanders = TeamNumber == 1 ? Replay.CommandersTeam1 : Replay.CommandersTeam2;
    var winnerTeam = Replay.WinnerTeam == TeamNumber;

    // 2. Calculate the local PlayerPos (1-3)
    int localPlayerPos = 0;
    if (TeamNumber == 1 && Replay.PlayerPos >= 1 && Replay.PlayerPos <= 3)
    {
        localPlayerPos = Replay.PlayerPos;
    }
    else if (TeamNumber == 2 && Replay.PlayerPos >= 4 && Replay.PlayerPos <= 6)
    {
        localPlayerPos = Replay.PlayerPos - 3;
    }

    // --- Markup remains mostly the same, using calculated local variables ---
    <div class="@(winnerTeam ? "d-flex border-start border-3 border-success" : "d-flex border-start border-3 border-danger")">
        @for (int i = 0; i < commanders.Count; i++)
        {
            // Determine the extra border class using the calculated localPlayerPos
            string borderClass = (i + 1) == localPlayerPos
            ? "border border-warning border-2"
            : string.Empty;

            <div class="@borderClass preload-@((commanders[i]).ToString().ToLower())"
                 alt="@(commanders[i])"
                 style="width: 30px; height: 30px;">
            </div>
        }
    </div>
}

@code {
    [Parameter, EditorRequired]
    public ReplayListDto Replay { get; set; } // Change 'object' to the actual type of 'replay'

    // Specify which team this component instance should render (1 or 2)
    [Parameter, EditorRequired]
    public int TeamNumber { get; set; }
}